{"version":3,"file":"Search.9f71814b.js","sources":["../../src/views/Search.vue"],"sourcesContent":["<script setup>\r\nimport { ref, watch } from \"vue\";\r\nimport { useSearchStore } from \"@/stores/search.js\";\r\nimport { storeToRefs } from \"pinia\";\r\nimport { apiSearchMovie } from \"@/apis/movie.js\";\r\nimport MovieModal from \"@/components/Global/Modal/MovieModal.vue\";\r\nimport MovieItem from \"@/components/MovieItem.vue\";\r\n\r\nconst searchStore = useSearchStore();\r\nconst { searchText } = storeToRefs(searchStore);\r\n\r\nconst movieList = ref([]);\r\nconst moviesEl = ref(null);\r\nconst notFind = ref(false);\r\n\r\nwatch(searchText, (v) => {\r\n  if (v) {\r\n    apiSearchMovie(v).then((res) => {\r\n      console.log(\"search res\", res);\r\n      let movies = res.data.results;\r\n      INITMyMovies(movies);\r\n    });\r\n  }\r\n});\r\n\r\nfunction INITMyMovies(movies = []) {\r\n  if (!movies.length) {\r\n    notFind.value = true;\r\n    return (movieList.value = movies);\r\n  }\r\n\r\n  movieList.value = movies.map((d) => {\r\n    return {\r\n      id: d.id,\r\n      //   url: d.poster_path,\r\n      url: d.backdrop_path, // 改長寬的圖\r\n      title: d.title ? d.title : d.name,\r\n      score: d.vote_average,\r\n      movie: d,\r\n      isNetflix: false,\r\n    };\r\n  });\r\n\r\n  notFind.value = false;\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"myMovies-wrapper\">\r\n    <div class=\"myMovies-wrapper-title\"></div>\r\n\r\n    <div v-if=\"searchText\">\r\n      <div class=\"movies-content\" ref=\"moviesEl\" v-if=\"!notFind\">\r\n        <!-- Slides -->\r\n        <div\r\n          class=\"movies-list\"\r\n          :key=\"index\"\r\n          v-for=\"(movie, index) in movieList\"\r\n          :data-movie-index=\"index\"\r\n        >\r\n          <MovieItem :movie=\"movie\" />\r\n        </div>\r\n      </div>\r\n      <div v-else style=\"width: 100%\">\r\n        <h3 style=\"font-size: 24px\">\r\n          找不到符合「{{ searchText }}」的搜尋結果。\r\n        </h3>\r\n      </div>\r\n    </div>\r\n\r\n    <MovieModal ref=\"modal\" />\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.myMovies-wrapper {\r\n  min-height: 100vh;\r\n  width: 100%;\r\n  padding: 0 3%;\r\n  @media screen and (max-width: 768px) {\r\n    padding: 0 4%;\r\n  }\r\n}\r\n.myMovies-wrapper-title {\r\n  padding-top: 70px;\r\n  padding-bottom: 70px;\r\n  h3 {\r\n    font-size: 2rem;\r\n    @media screen and (max-width: 800px) {\r\n      font-size: 1.8rem;\r\n    }\r\n  }\r\n}\r\n.movies-content {\r\n  display: grid;\r\n  grid-template-columns: 16.66665% 16.66665% 16.66665% 16.66665% 16.66665% 16.66665%;\r\n  margin: -5px;\r\n\r\n  @media screen and (max-width: 1400px) {\r\n    grid-template-columns: 20% 20% 20% 20% 20%;\r\n  }\r\n\r\n  @media screen and (max-width: 1100px) {\r\n    grid-template-columns: 25% 25% 25% 25%;\r\n  }\r\n  @media screen and (max-width: 800px) {\r\n    grid-template-columns: 33.33333% 33.33333% 33.33333%;\r\n  }\r\n  @media screen and (max-width: 500px) {\r\n    grid-template-columns: 50% 50%;\r\n  }\r\n\r\n  .movies-list {\r\n    margin: 5px;\r\n    position: relative;\r\n    border-radius: 5px;\r\n    overflow: hidden;\r\n    transition: ease 0.3s;\r\n    margin-bottom: 45px;\r\n\r\n    @media screen and (max-width: 500px) {\r\n      margin-bottom: 35px;\r\n    }\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 480px) {\r\n  .movies-content {\r\n    .movies-list {\r\n      border-radius: 5px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":[],"mappings":"wZAQA,KAAM,GAAc,EAAc,EAC5B,CAAE,cAAe,EAAY,CAAW,EAExC,EAAY,EAAI,CAAA,CAAE,EAClB,EAAW,EAAI,IAAI,EACnB,EAAU,EAAI,EAAK,EAEzB,EAAM,EAAY,AAAC,GAAM,CACvB,AAAI,GACF,EAAe,CAAC,EAAE,KAAK,AAAC,GAAQ,CAC9B,QAAQ,IAAI,aAAc,CAAG,EAC7B,GAAI,GAAS,EAAI,KAAK,QACtB,EAAa,CAAM,CACzB,CAAK,CAEL,CAAC,EAED,WAAsB,EAAS,GAAI,CACjC,GAAI,CAAC,EAAO,OACV,SAAQ,MAAQ,GACR,EAAU,MAAQ,EAG5B,EAAU,MAAQ,EAAO,IAAI,AAAC,GACrB,EACL,GAAI,EAAE,GAEN,IAAK,EAAE,cACP,MAAO,EAAE,MAAQ,EAAE,MAAQ,EAAE,KAC7B,MAAO,EAAE,aACT,MAAO,EACP,UAAW,EACjB,EACG,EAED,EAAQ,MAAQ,EAClB"}