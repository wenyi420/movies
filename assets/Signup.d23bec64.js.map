{"version":3,"file":"Signup.d23bec64.js","sources":["../../src/views/Signup.vue"],"sourcesContent":["<script setup>\r\nimport loginBG from \"@/assets/image/loginBanner.jpg\";\r\nimport vInput from \"@/components/Form/v-input.vue\";\r\nimport GoogleBtn from \"@/components/Button/GoogleButton.vue\";\r\nimport FBBtn from \"@/components/Button/FBButton.vue\";\r\nimport LineBtn from \"@/components/Button/LineButton.vue\";\r\nimport BaseLoginBtn from \"@/components/Button/BaseLoginButton.vue\";\r\n\r\nimport { showSuccessAlert } from \"@/utils.js\";\r\n\r\nimport { reactive, ref, watch, onBeforeMount, onMounted, computed } from \"vue\";\r\nimport { storeToRefs } from \"pinia\";\r\nimport { useUserStore } from \"@/stores/user.js\";\r\nimport { apiCreateAccont } from \"@/apis/googleSheet.js\";\r\n\r\nimport { routerUtils } from \"@/common/routerUtils.js\";\r\nconst { toLogin } = routerUtils();\r\n\r\nconst store = useUserStore();\r\nconst { users, count } = storeToRefs(store);\r\n// users.value.forEach((u) => {\r\n//   let obj = {\r\n//     account: u.account,\r\n//     pwd: u.password,\r\n//   };\r\n//   console.log(\"user obj \", obj);\r\n// });\r\n\r\nconst account = ref(null);\r\nconst password = ref(null);\r\n\r\nconst rememberMe = ref(false);\r\n/**\r\n * rules:\r\n */\r\n\r\nconst accountRules = reactive([\r\n  {\r\n    required: true,\r\n    message: \"請填寫必填項目，測試信箱：test@mail.tw\",\r\n  },\r\n  {\r\n    email: true,\r\n    rule: null, // 自訂規則\r\n    message: \"信箱驗證失敗，測試信箱:test@mail.tw\",\r\n  },\r\n]);\r\n\r\nconst passwordRules = reactive([\r\n  {\r\n    required: true,\r\n    message: \"請填寫必填項目，測試密碼：123\",\r\n  },\r\n]);\r\n\r\nfunction checkValue() {\r\n  let vlidate_1 = account.value?.validate();\r\n  let vlidate_2 = password.value?.validate();\r\n\r\n  Promise.all([vlidate_1, vlidate_2])\r\n    .then(() => {\r\n      singup();\r\n    })\r\n    .catch(() => {\r\n      alert(\"請填寫正確值\");\r\n    });\r\n}\r\n\r\nasync function singup() {\r\n  let data = {\r\n    account: account.value?.innerModel,\r\n    password: password.value?.innerModel,\r\n    role: \"member\",\r\n    postType: \"signup\",\r\n  };\r\n\r\n  let resp = await apiCreateAccont(data);\r\n  if (resp) {\r\n    await showSuccessAlert({ title: resp.data.account + \"，\" + resp.msg });\r\n    toLogin();\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"login-wrapper\">\r\n    <div\r\n      class=\"login-wrapper-bg\"\r\n      :style=\"{ 'background-image': 'url(' + loginBG + ')' }\"\r\n    ></div>\r\n  </div>\r\n  <div class=\"login-body\">\r\n    <div class=\"login-content\">\r\n      <h1>註冊帳戶</h1>\r\n      <form>\r\n        <vInput :rules=\"accountRules\" label=\"電子郵件\" ref=\"account\"></vInput>\r\n        <vInput\r\n          :rules=\"passwordRules\"\r\n          label=\"密碼\"\r\n          ref=\"password\"\r\n          type=\"password\"\r\n        ></vInput>\r\n\r\n        <div class=\"login-btn-wrapper\">\r\n          <BaseLoginBtn type=\"main\" @click=\"checkValue\">註冊</BaseLoginBtn>\r\n          <div class=\"login\">\r\n            已經是會員？<a class=\"loginLink\" @click=\"toLogin\">立即登入</a>。\r\n          </div>\r\n        </div>\r\n        <div class=\"connentLogin-wrapper\">\r\n          <FBBtn />\r\n          <GoogleBtn />\r\n          <LineBtn />\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.login-wrapper {\r\n  overflow: hidden;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  display: block;\r\n\r\n  .login-wrapper-bg {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-repeat: no-repeat;\r\n    background-size: cover;\r\n\r\n    @media screen and (max-width: 640px) {\r\n      display: none;\r\n    }\r\n  }\r\n}\r\n\r\n.login-body {\r\n  position: relative;\r\n  margin: 0 auto;\r\n  background-color: transparent;\r\n  max-width: 450px;\r\n  z-index: 10;\r\n  min-height: calc(100vh - 228px);\r\n\r\n  &::before {\r\n    content: \"\";\r\n    display: block;\r\n    height: 91px;\r\n  }\r\n  .login-content {\r\n    min-height: 780px;\r\n    padding: 60px 68px 40px;\r\n    margin-bottom: 90px;\r\n    background: rgba(0, 0, 0, 0.75);\r\n\r\n    h1 {\r\n      color: var(--v-white);\r\n      font-size: 32px;\r\n      font-weight: 700;\r\n      margin-bottom: 25px !important;\r\n    }\r\n  }\r\n}\r\n\r\n.light .login-body .login-content {\r\n  background: rgba(255, 255, 255, 0.75);\r\n}\r\n\r\n.login-btn-wrapper {\r\n  .other {\r\n    display: flex;\r\n    justify-content: space-between;\r\n\r\n    a {\r\n      color: var(--footer-text-color);\r\n\r\n      &:hover {\r\n        text-decoration: underline;\r\n      }\r\n    }\r\n\r\n    .ant-checkbox-wrapper {\r\n      color: var(--color-text);\r\n      padding-left: 2px;\r\n    }\r\n    .ant-checkbox-inner {\r\n      background-color: #737373;\r\n      border: none;\r\n    }\r\n    .ant-checkbox-checked .ant-checkbox-inner {\r\n      background-color: #737373;\r\n      border-color: #737373;\r\n    }\r\n    .ant-checkbox-wrapper:hover .ant-checkbox-inner,\r\n    .ant-checkbox-checked::after {\r\n      border-color: #737373;\r\n    }\r\n  }\r\n  .login {\r\n    font-size: 16px;\r\n    margin-top: 40px;\r\n    margin-bottom: 12px;\r\n    color: var(--footer-text-color);\r\n    .loginLink {\r\n      color: var(--color-text);\r\n      &:hover {\r\n        text-decoration: underline;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 640px) {\r\n  .login-body {\r\n    width: 90%;\r\n    margin: 0 auto;\r\n    max-width: 100%;\r\n\r\n    .login-content {\r\n      padding: 0;\r\n      min-height: auto;\r\n    }\r\n  }\r\n  .login-wrapper img {\r\n    display: none;\r\n  }\r\n}\r\n</style>\r\n"],"names":[],"mappings":"4gBAgBA,KAAM,CAAE,WAAY,IAEd,EAAQ,EAAY,EACD,EAAY,CAAK,EAS1C,KAAM,GAAU,EAAI,IAAI,EAClB,EAAW,EAAI,IAAI,EAEN,EAAI,EAAK,EAK5B,KAAM,GAAe,EAAS,CAC5B,CACE,SAAU,GACV,QAAS,4FACV,EACD,CACE,MAAO,GACP,KAAM,KACN,QAAS,iFACV,CACH,CAAC,EAEK,EAAgB,EAAS,CAC7B,CACE,SAAU,GACV,QAAS,mFACV,CACH,CAAC,EAED,YAAsB,SACpB,GAAI,GAAY,KAAQ,QAAR,cAAe,WAC3B,EAAY,KAAS,QAAT,cAAgB,WAEhC,QAAQ,IAAI,CAAC,EAAW,CAAS,CAAC,EAC/B,KAAK,IAAM,CACV,GACN,CAAK,EACA,MAAM,IAAM,CACX,MAAM,sCAAQ,CACpB,CAAK,CACL,CAEA,kBAAwB,SACtB,GAAI,GAAO,CACT,QAAS,KAAQ,QAAR,cAAe,WACxB,SAAU,KAAS,QAAT,cAAgB,WAC1B,KAAM,SACN,SAAU,QACd,EAEM,EAAO,KAAM,GAAgB,CAAI,EACrC,AAAI,GACF,MAAM,GAAiB,CAAE,MAAO,EAAK,KAAK,QAAU,SAAM,EAAK,GAAG,CAAE,EACpE,IAEJ"}