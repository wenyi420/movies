import{_ as x,T as b,U as N,r as d,G as f,b as S,d as T,o as a,h as l,F as w,l as E,i as r,x as p,W as L,j as B,X as D,Y as G,p as F,m as U,Z as V}from"./index.f1a7514c.js";const m=n=>(F("data-v-bbbcb106"),n=n(),U(),n),j={class:"myMovies-wrapper"},z=m(()=>r("div",{class:"myMovies-wrapper-title"},[r("h3",null,"\u6211\u7684\u7247\u55AE")],-1)),A={key:0},J={key:1,style:{width:"100%"}},O=m(()=>r("h3",{style:{"font-size":"24px"}},"\u5C1A\u672A\u6DFB\u52A0\u96FB\u5F71\u5230\u6211\u7684\u7247\u55AE",-1)),P=[O],R={key:1},W={class:"movies-content INITing"},X={class:"movies-list"},Y={setup(n){const h=b(),{userData:u,myMovies:y}=N(h),c=d([]),g=d(null),o=d(!1);f(u,e=>{e&&!o.value&&(console.log("v",e),v(e.movies))}),f(y,e=>{e&&o.value&&v(e)}),u.value.movies?v(u.value.movies):setTimeout(()=>{o.value=!0},1e4);function v(e=""){if(!e)return o.value=!0;if(e=JSON.parse(e),!e.length){c.value=[],o.value=!0;return}console.log("movies",e);let _=[];e.forEach(s=>{let i;s.toString().includes("n")?(s=s.replace("n",""),i=S(s)):i=T(s),_.push(i)}),Promise.all(_).then(s=>{let i=[];s.forEach(t=>{i.push(t.data)}),c.value=i.map(t=>{let I=t.id,M=!!e.find(k=>k.toString().includes(I));return{id:t.id,url:t.backdrop_path,title:t.title?t.title:t.name,score:t.vote_average,movie:t,isNetflix:M}}),o.value=!0}).catch(()=>{o.value=!0})}return(e,_)=>(a(),l("div",j,[z,o.value?(a(),l("div",A,[c.value.length?(a(),l("div",{key:0,class:"movies-content",ref_key:"moviesEl",ref:g},[(a(!0),l(w,null,E(c.value,s=>(a(),l("div",{class:"movies-list",key:s.id},[p(V,{movie:s},null,8,["movie"])]))),128))],512)):(a(),l("div",J,P))])):(a(),l("div",R,[r("div",W,[r("div",X,[p(L,{"content-url":B(D),"keep-loading":!0},null,8,["content-url"])])])])),p(G,{ref:"modal"},null,512)]))}};var $=x(Y,[["__scopeId","data-v-bbbcb106"]]);export{$ as default};
